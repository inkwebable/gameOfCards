!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.GameOfCards=t():e.GameOfCards=t()}(self,(function(){return function(){"use strict";var e={443:function(e,t,a){var s=a(81),r=a.n(s),i=a(645),n=a.n(i)()(r());n.push([e.id,"",""]),t.Z=n},645:function(e){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a="",s=void 0!==t[5];return t[4]&&(a+="@supports (".concat(t[4],") {")),t[2]&&(a+="@media ".concat(t[2]," {")),s&&(a+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),a+=e(t),s&&(a+="}"),t[2]&&(a+="}"),t[4]&&(a+="}"),a})).join("")},t.i=function(e,a,s,r,i){"string"==typeof e&&(e=[[null,e,void 0]]);var n={};if(s)for(var o=0;o<this.length;o++){var d=this[o][0];null!=d&&(n[d]=!0)}for(var c=0;c<e.length;c++){var l=[].concat(e[c]);s&&n[l[0]]||(void 0!==i&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=i),a&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=a):l[2]=a),r&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=r):l[4]="".concat(r)),t.push(l))}},t}},81:function(e){e.exports=function(e){return e[1]}},379:function(e){var t=[];function a(e){for(var a=-1,s=0;s<t.length;s++)if(t[s].identifier===e){a=s;break}return a}function s(e,s){for(var i={},n=[],o=0;o<e.length;o++){var d=e[o],c=s.base?d[0]+s.base:d[0],l=i[c]||0,h="".concat(c," ").concat(l);i[c]=l+1;var u=a(h),f={css:d[1],media:d[2],sourceMap:d[3],supports:d[4],layer:d[5]};if(-1!==u)t[u].references++,t[u].updater(f);else{var m=r(f,s);s.byIndex=o,t.splice(o,0,{identifier:h,updater:m,references:1})}n.push(h)}return n}function r(e,t){var a=t.domAPI(t);return a.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;a.update(e=t)}else a.remove()}}e.exports=function(e,r){var i=s(e=e||[],r=r||{});return function(e){e=e||[];for(var n=0;n<i.length;n++){var o=a(i[n]);t[o].references--}for(var d=s(e,r),c=0;c<i.length;c++){var l=a(i[c]);0===t[l].references&&(t[l].updater(),t.splice(l,1))}i=d}}},569:function(e){var t={};e.exports=function(e,a){var s=function(e){if(void 0===t[e]){var a=document.querySelector(e);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(e){a=null}t[e]=a}return t[e]}(e);if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(a)}},216:function(e){e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:function(e,t,a){e.exports=function(e){var t=a.nc;t&&e.setAttribute("nonce",t)}},795:function(e){e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(a){!function(e,t,a){var s="";a.supports&&(s+="@supports (".concat(a.supports,") {")),a.media&&(s+="@media ".concat(a.media," {"));var r=void 0!==a.layer;r&&(s+="@layer".concat(a.layer.length>0?" ".concat(a.layer):""," {")),s+=a.css,r&&(s+="}"),a.media&&(s+="}"),a.supports&&(s+="}");var i=a.sourceMap;i&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(s,e,t.options)}(t,e,a)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:function(e){e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function a(s){var r=t[s];if(void 0!==r)return r.exports;var i=t[s]={id:s,exports:{}};return e[s](i,i.exports,a),i.exports}a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};return function(){a.r(s),a.d(s,{Actions:function(){return e},Game:function(){return j},animateCardFromOneAreaToAnother:function(){return y},cardShuffle:function(){return g},dealCards:function(){return k},swapDomElements:function(){return b},wait:function(){return C}});var e={};a.r(e),a.d(e,{animateCardFromOneAreaToAnother:function(){return y},cardShuffle:function(){return g},dealCards:function(){return k},swapDomElements:function(){return b},wait:function(){return C}});var t=a(379),r=a.n(t),i=a(795),n=a.n(i),o=a(569),d=a.n(o),c=a(565),l=a.n(c),h=a(216),u=a.n(h),f=a(589),m=a.n(f),p=a(443),v={};v.styleTagTransform=m(),v.setAttributes=l(),v.insert=d().bind(null,"head"),v.domAPI=n(),v.insertStyleElement=u(),r()(p.Z,v),p.Z&&p.Z.locals&&p.Z.locals;const C=e=>new Promise((t=>setTimeout(t,e))),g=async(e=[],t=(()=>{}),a={})=>{let{index:s,delay:r}=Object.assign({},{index:0,delay:500},a);for(await C(r);s<=e.length-2;){let t=e[s],a=e[s+1],r=t.dom,i=a.dom;if(r.className="goc-card-container shuffle-left",i&&(i.className="goc-card-container shuffle-right"),await C(100),r.className="goc-card-container shuffle-right",i){i.className="goc-card-container shuffle-left",b(r,i);let n=t;e[s]=a,e[s+1]=n}s+=2}return await C(1e3),t(),Promise.resolve({data:s})},b=(e,t)=>{let a=t.parentNode,s=t.nextSibling;s===e?a.insertBefore(e,t):(e.parentNode.insertBefore(t,e),s?a.insertBefore(e,s):a.appendChild(e))},y=async(e,t,a,s)=>{let{speed:r,inlineFlex:i,moveCardObjects:n}=Object.assign({},{speed:300,inlineFlex:!1,moveCardObjects:!1},s);const o=window.getComputedStyle(a.dom);let d=a.dom.offsetWidth+(parseFloat(o.marginLeft)+parseFloat(o.marginRight)),c=a.dom.offsetHeight+(parseFloat(o.marginTop)+parseFloat(o.marginBottom)),l=t.cards.length*d,h=(t.cards.length,t.area.stackHorizontal,t.area.stackVertical),u=t.area.flexArea,f=t.area.maxCardsInHorizontal,m=t.area.dealCenterLine,p=0;if(u&&!h){let e=t.area.dom.offsetWidth<d?d:t.area.dom.offsetWidth;f=Math.floor(parseInt(e,10)/parseInt(d,10))}if(h){let s=t.area.position.left-e.area.position.left,i=t.area.position.top-e.area.position.top;f>0?(p=parseInt(t.cards.length/f,10),l=d*(t.cards.length%f),s+=l,i+=p*c-(p>0?100*p:0)):i+=0,m&&(s=t.area.dom.offsetWidth/2-e.area.position.left),a.dom.style.position="absolute",a.dom.style.transform=`translate(${s}px,${i}px)`,a.dom.style.transition=`transform ${r}ms`}else{p=parseInt(t.cards.length/f,10),l=d*(t.cards.length%f),u&&t.cards.length===f&&0===l&&(p=0,l=d*t.cards.length);let s=t.area.position.left-e.area.position.left+l,n=t.area.position.top-e.area.position.top+p*c;m&&(s=0),i&&u&&(m&&(t.area.dom.style.justifyContent="center"),t.area.dom.style.display="flex",t.area.dom.style.flexWrap="wrap"),a.dom.style.position=u?"relative":"absolute",a.dom.style.transform=`translate(${s}px,${n}px)`,a.dom.style.transition=`transform ${r}ms`}return await C(r),a.dom.className="goc-card-container",t.area.dom.appendChild(a.dom),h?(a.dom.style.position="absolute",a.dom.style.transform=f>0?`translate(${l}px,${p*c-(p>0?100*p:0)}px )`:"translate(0px,0px )",a.dom.style.transition=`transform ${r}ms`):(a.dom.style.position=u?"relative":"absolute",a.dom.style.transform=u?"translate(0,0)":`translate(${l}px,${p*c}px )`,a.dom.style.transition=`transform ${r}ms`),n&&(await e.cards.removeCardFromHand(a),await t.cards.addCardToHand(a)),Promise.resolve({data:"done"})},k=async(e,t,a={})=>{let{totalCardsToDeal:s,perPlayer:r,speed:i,sequential:n,delay:o,inlineFlex:d,moveCardObjects:c}=Object.assign({},{totalCardsToDeal:0,perPlayer:0,speed:300,sequential:!1,delay:1e3,inlineFlex:!1,moveCardObjects:!1},a);if(!e.hand.cards.length>0)return Promise.reject({error:"no cards"});let l=t.length,h=0,u=0,f=Array(l).fill(0);for(0!==r?s=r>0?r*l:s:r=s/l;h<s&&0!==e.hand.cards.length;){let a=e.hand.getLastCard();await y(e.hand,t[u].hand,a,{speed:i,moveCardObjects:c,inlineFlex:d}),await e.hand.removeCardFromHand(a),await t[u].hand.addCardToHand(a),f[u]+=1,n?t[u]&&(u=u>=l-1?0:u+1):f[u]===r&&(u=u>=l-1?0:u+1),h++}return Promise.resolve({data:"done"})};var O=class{constructor(e){let t=Object.assign({},{name:"",value:0,suit:"",image:"",imageDefault:"front",cardColor:"",visible:!1,allowFlip:!0,clickable:!0,movable:!0,moving:!1,droppable:!1,inArea:null,transitioning:!1,faceUp:!1,faceDown:!0,currentEvent:null,events:{click:()=>{},transitionend:()=>{}},onClick:e=>{},onCardFaceUp:()=>{},onCardFaceDown:()=>{}},e);Object.defineProperties(this,{_id:{value:t.id||void 0,writable:!1}}),this.name=t.name||"",this.value=t.value||0,this.suit=t.suit||"",this.image=t.image||"",this.imageDefault=t.imageDefault,this.cardColor=t.cardColor||"",this.visible=t.visible||!1,this.allowFlip=t.allowFlip||!0,this.clickable=t.clickable||!0,this.movable=t.movable||!0,this.moving=t.moving||!1,this.droppable=t.droppable||!1,this.inArea=t.inArea||null,this.transitioning=t.transitioning||!1,this.faceUp=t.faceUp||!1,this.faceDown=t.faceDown||!0,this.currentEvent=t.currentEvent||null,this.events=t.events||{},this.onClick=t.onClick||(e=>{}),this.onCardFaceUp=t.onCardFaceUp||(e=>{}),this.onCardFaceDown=t.onCardFaceDown||(e=>{}),this.hand={}}setDom(e){Object.defineProperty(this,"dom",{value:e,writable:!1})}setDOMClassContainer(e){this.dom.className=e}addDOMClassContainer(e){this.dom.className+=` ${e}`}setDOMClassCard(e){this.dom.children[0].className=e}addDOMClassCard(e){this.dom.children[0].className+=` ${e}`}setClickEvent(e,t,a=!0){return this.onClick=e.bind(this,t),a&&this.activateClickEventListener(),this.onClick}setTransitionEvent({onCardFaceUp:e,onCardFaceDown:t},a,s=!0){e&&(this.onCardFaceUp=e.bind(this,a)),t&&(this.onCardFaceDown=t.bind(this,a)),s&&this.activateTransitionedEventListener()}activateClickEventListener(){this.clearClickListener(),this.events.click=this.onClick,this.dom.addEventListener("click",this.events.click)}activateTransitionedEventListener(){this.clearTransitionedListener(),this.events.transitionend=this._afterTransition.bind(this),this.dom.addEventListener("transitionend",this.events.transitionend)}activateAllEventListeners(){this.removeAllEventListeners(),this.activateClickEventListener(),this.activateTransitionedEventListener()}removeAllEventListeners(){this.clearClickListener(),this.clearTransitionedListener()}removeAllEvents(){const e=[];for(let t in this.events)this.clearEvent(t)?(e.push(`${t} removed`),this.events[t]=()=>{}):console.error(`${t}event not removed from card ${this._id}`);return e}clearEvent(e){return!!{}.hasOwnProperty.call(this.events,e)&&(this.dom.removeEventListener(e,this.events[e]),!0)}clearClickListener(e=this.events.click){this.dom.removeEventListener("click",e)}clearTransitionedListener(e=this.events.transitionend){this.dom.removeEventListener("transitionend",e)}flipCardFaceUp(){return this.currentEvent="flipCardFaceUp",!this.visible&&(this.dom.querySelector(".goc-front img").src=this.image,this.addDOMClassCard(" flipped"),this.transitioning=!0,!0)}flipCardFaceDown(){return this.currentEvent="flipCardFaceDown",!!this.visible&&(this.setDOMClassCard("goc-card"),this.transitioning=!0,!0)}_afterTransition(e){this.transitioning=!1,"flipCardFaceUp"===this.currentEvent&&(this.visible=!0,this.onCardFaceUp(e)),"flipCardFaceDown"===this.currentEvent&&(this.visible=!1,this.onCardFaceDown(e),this.clearFrontFaceImg())}clearFrontFaceImg(e=this.imageDefault){this.dom.querySelector(".goc-front img").src=`${e}`}isTransitioning(){return!0===this.transitioning}},w=class{constructor(e,t="standard playing cards",a="js-deck",s){const r=Object.assign({},{numberOfEachCard:1,cardSuits:{hearts:"red",clubs:"black",diamonds:"red",spades:"black"},cardValues:{A:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,J:11,Q:12,K:13},imageNames:[],imagePath:"images/game-of-cards/default-cards",backOfCardSrc:"back.png",frontOfCardSrc:"front.png",cardSectionClass:"goc-card-container",customCardContainerClass:"",imageExt:"jpg",useSuits:!0,addValues:!0,cheat:!1,getNamesFromPath:!1},s);Object.defineProperties(this,{_id:{value:e,writable:!1}}),Object.defineProperties(this,{name:{value:t,writable:!1}}),Object.defineProperties(this,{elementId:{value:a,writable:!1}}),this._ids=r._ids||[],this._DOMCards=r._DOMCards||[],this._DOMDeck=r._DOMDeck||[],this.numberOfEachCard=r.numberOfEachCard||1,this.cardSuits=r.cardSuits,this.imageNames=r.imageNames,this.cardValues=r.cardValues,this.imagePath=r.imagePath,this.cardSectionClass=r.cardSectionClass,this.backOfCardSrc=r.backOfCardSrc,this.frontOfCardSrc=r.frontOfCardSrc,this.imageExt=r.imageExt,this.cards=r.cards||[],this.customCardContainerClass=r.customCardContainerClass,this.useSuits=r.useSuits,this.addValues=r.addValues,this.areas=r.areas,this.cheat=r.cheat,this.getNamesFromPath=r.getNamesFromPath,this.createDeckObj()}newNumber(e){let t=`_${Math.floor(1e7*Math.random())}`;return-1===e.indexOf(t)?(e.push(t),t):this.newNumber(e)}createDeckObj(){for(const e in this.cardSuits)for(const t in this.cardValues){let a=0;for(;a<this.numberOfEachCard;){let s=this.newNumber(this._ids),r=new O({name:t,value:this.addValues?this.cardValues[t]:0,suit:this.useSuits?e:"",image:`${this.imagePath}/${t}${e}.${this.imageExt}`,imageDefault:`${this.imagePath}/${this.frontOfCardSrc}`,cardColor:this.cardSuits[e],id:s.toString()});this.cards.push(r),a++}}}makeDomDeck(){this._DOMCards=this.cards.map((e=>`<section class="${this.cardSectionClass} ${this.customCardContainerClass}" style="transform: translate(0px,0px);">\n                <div class="goc-card" id="${e._id}">\n                <figure class="goc-back"><img src="${this.imagePath}/${this.backOfCardSrc}" alt="back of card"></figure>\n                <figure class="goc-front"><img src="${this.imagePath}/${this.frontOfCardSrc}" alt="front of card"></figure>\n                ${this.cheat?`<p class="goc-cheat">${e.name} ${e.suit}</p>`:""}\n                </div>\n                </section>`))}addDeckToDOM(e=this.elementId,t=this._DOMCards){document.getElementById(e).innerHTML=t.join("")}assignCardDomToCardObj(e=this.cards){let t,a=[];for(let s of e)t=document.getElementById(s._id),a.push(t),s.setDom(t.parentNode);return a}shuffleCardsObj(e=this.cards){let t,a,s=e.length;for(;0!==s;)a=Math.floor(Math.random()*s),s-=1,t=e[s],e[s]=e[a],e[a]=t;return e}findCardById(e){return this.cards.find((t=>t._id===e))}handleMyErrors(e){console.error("error",e)}},D=class extends w{constructor({id:e,name:t,elementId:a,options:s}){super(e,t,a,s)}},E=class extends w{constructor({id:e,name:t,elementId:a,options:s}){s.cardSuits={},s.cardValues=s.cardValues?s.cardValues:{},s.useSuits=!1,super(e,t,a,s)}createDeckObj(){if(this.imageNames.length>0)this.imageNames.forEach((e=>{let t=0;for(;t<this.numberOfEachCard;){let a=this.newNumber(this._ids),s=new O({name:e,value:this.addValues?this.cardValues[e]:0,suit:"",image:`${this.imagePath}/${e}.${this.imageExt}`,imageDefault:`${this.imagePath}/${this.frontOfCardSrc}`,cardColor:this.cardSuits.suit,id:a.toString()});this.cards.push(s),t++}}));else if(Object.keys(this.cardValues).length>0)for(const e in this.cardValues){let t=0;for(;t<this.numberOfEachCard;){let a=this.newNumber(this._ids),s=new O({name:e,value:this.addValues?this.cardValues[e]:0,suit:"",image:`${this.imagePath}/${e}.${this.imageExt}`,imageDefault:`${this.imagePath}/${this.frontOfCardSrc}`,cardColor:this.cardSuits.suit,id:a.toString()});this.cards.push(s),t++}}}},F=class{constructor(){this.deckClass=D}createDeck(e,t){switch(e){case"default":this.deckClass=D;break;case"matching":this.deckClass=E}return new this.deckClass(t)}},x=class{constructor(e,t="player",a){let s=Object.assign({},{playing:!0,ready:!1,turn:!1},a);Object.defineProperties(this,{_id:{value:e,writable:!1}}),this.name=t,this.hand=[],this.ready=s,this.turn=s}createHand(e,t){return this.hand=new class{constructor(e,t){const a={data:{test:"test"},rules:{test:"",cardsCanBeAdded:!0,cardsCanBeClicked:!0,cardsCanBeRemoved:!0,cardsCanBeSelected:!0,allowFlip:!0}};let s=Object.assign({},a,t),r=s.rules,i=s.data;Object.defineProperties(this,{_id:{value:e,writable:!1}});let n=Object.assign({},a.rules,r),o=Object.assign({},a.data,i);this.cards=[],this.areas=[],this.area={},this.rules=n,this.data=o,this.handleCardAdded=(e,t)=>{},this.handleCardRemoved=(e,t)=>{},this.cards=s.cards||[]}createArea(e,t,a){const s=new class{constructor(e,t,a,s){const r=Object.assign({},{stackVertical:!1,maxCardsInHorizontal:0,flexArea:!0,dealCenterLine:!1},s);Object.defineProperties(this,{_id:{value:e,writable:!1},elementId:{value:t,writable:!1}}),this.name=a,this.placeHolders=r.placeHolders||{},this.position={top:0,right:0,bottom:0,left:0},this.siteElementOffsets={top:72,right:0,bottom:0,left:0},this.cards=[],this.rules={cardsFaceDown:!0,cardsFaceUp:!1,canReceiveCards:!0,canRemoveCards:!0,canMoveCards:!1,canTurnCards:!0,playerCanSeeCards:!0,othersCanSeeCards:!0,maxCardsAllowed:void 0},this.handleCardReceived=e=>{},this.handleCardRemoved=e=>{console.log("dom removed from area",e)},this.events={},this.stackVertical=r.stackVertical,this.maxCardsInHorizontal=r.maxCardsInHorizontal||0,this.flexArea=r.flexArea,this.dealCenterLine=r.dealCenterLine,this.dom=void 0,this.getAreaPosition()}getAreaPosition(){let e=document.getElementById(this.elementId);this.dom=e;let t=e.getBoundingClientRect();this.position.top=t.top-this.siteElementOffsets.top,this.position.right=t.right-this.siteElementOffsets.right,this.position.bottom=t.bottom-this.siteElementOffsets.bottom,this.position.left=t.left-this.siteElementOffsets.left}setObserver(){const e=this.dom;return new MutationObserver(((e,t)=>{for(let t of e)"childList"===t.type?(t.addedNodes.length>0&&t.addedNodes.forEach((async e=>{await this.onCardReceived(e)})),t.removedNodes.length>0&&t.removedNodes.forEach((async e=>{await this.onCardRemoved(e)}))):"attributes"===t.type&&console.log("The "+t.attributeName+" attribute was modified.")})).observe(e,{attributes:!1,childList:!0,subtree:!0}),this}async onCardReceived(e){return await this.handleCardReceived(e),Promise.resolve({someVal:"onCardReceived done"})}async onCardRemoved(e){return await this.handleCardRemoved(e),Promise.resolve({someVal:"onCardRemoved done"})}}(`${this.player._id}-${this._id}-area-${this.areas.length}`,e,t,a);return Object.defineProperty(this.area,"hand",{value:this,writable:!1}),this.addAreaToAreas(s),this.area=s,this.area}addAreaToAreas(e){this.areas.push(e)}addCardsToHand(e){let t=e.filter((e=>e instanceof O));this.cards=t}async addCardToHand(e){this.cards.push(e),await this.onCardAdded(e)}async removeCardFromHand(e){this.cards=this.cards.filter((t=>t._id!==e._id)),await this.onCardRemoved(e)}async onCardAdded(e){return e.hand=this,await this.handleCardAdded(e,this),Promise.resolve({someVal:"Hand.onCardReceived done"})}async onCardRemoved(e){return e.hand=null,await this.handleCardRemoved(e,this),Promise.resolve({someVal:"Hand.onCardRemoved done"})}setUpCardEvents(){for(let e of this.cards)e.activateAllEventListeners()}setCardClickFn(e,t=!0){if(this.cards.length>0)for(let t of this.cards)t.onClick=e.bind(this,{card:t}),t.activateClickEventListener()}setTransitionEvent({onCardFaceUp:e,onCardFaceDown:t},a=!0){if(this.cards.length>0)for(let s of this.cards)s.setTransitionEvent({onCardFaceUp:e.bind(this,{card:s}),onCardFaceDown:t.bind(this,{card:s})},a)}setAfterCardFaceUpFn(e,t=!0,a){if(this.cards.length>0)for(let s of this.cards)s.setTransitionEvent({onCardFaceUp:e.bind(this,{card:s})},a,t)}setAfterCardFaceDownFn(e,t=!0){if(this.cards.length>0)for(let a of this.cards)a.setTransitionEvent({onCardFaceDown:e.bind(this,{card:a})},t)}removeAllCardEvents(){for(let e of this.cards){console.log("Hand.removeAllCardEvents & listeners",e);const t=e.removeAllEvents();console.log("removed",t)}}allCardsTransitioned(){for(let e of this.cards)if(e.transitioning)return!1;return!0}getLastCard(){if(this.cards.length>0)return this.cards[this.cards.length-1]}findCardById(e){return this.cards.find((t=>t._id===e))}}(e,t),Object.defineProperty(this.hand,"player",{value:this,writable:!1}),this.hand}},P=class extends x{constructor({id:e,name:t,options:a}){super(e,t,a)}},S=class extends x{constructor({id:e,name:t,options:a}){super(e,t,a),Object.defineProperty(this,"dealer",{value:a.dealer,writable:!1})}},T=class{constructor(){this.playerClass=P}createPlayer(e,t){return this.playerClass="ai"===e?S:P,new this.playerClass(t)}},j=class{constructor(e){let t=Object.assign({},{name:"GameOfCards",data:{}},e);this.name=t.name,this.data=t.data,this.decks=[],this.players=[],Object.defineProperties(this,{deckFactory:{value:new F,writable:!1},playerFactory:{value:new T,writable:!1}})}createStandardDeck(e,t,a,s,r=!0){const i=this.deckFactory.createDeck("default",{id:e,name:t,elementId:a,options:s});return console.log("createStandardDeck -deck",i),r&&this.addDeckToDecks(i),i}createDeck(e,t,a,s,r="default",i=!0){const n=this.deckFactory.createDeck(r,{id:e,name:t,elementId:a,options:s});return i&&this.addDeckToDecks(n),n}addDeckToDecks(e){return this.decks.push(e),this.decks}createPlayer(e,t,a,s=!0){const r=this.playerFactory.createPlayer("default",{id:e,name:t,options:a});return s&&this.addPlayerToPlayers(r),r}createDealer(e,t="dealer",a){let s=Object.assign({},{dealer:!0,ready:!1,playing:!1},a);const r=this.playerFactory.createPlayer("ai",{id:e,name:t,options:s});return s.playing&&this.addPlayerToPlayers(r),this.dealer=r,r}addPlayerToPlayers(e){this.players.push(e)}findPlayerByName(e){if(this.players.length>0)return this.players.find((t=>t.name===e))}addDeckToDom(e){return(e?this.findDeckById(e):this.decks[0]).addDeckToDOM(),this}assignCardDomToCardObj(e){return(e?this.findDeckById(e):this.decks[0]).assignCardDomToCardObj()}shuffleDeckCards(e){return(e?this.findDeckById(e):this.decks[0]).shuffleCardsObj(),this}makeDomMarkUp(e){return(e?this.findDeckById(e):this.decks[0]).makeDomDeck(),this}findDeckById(e){return this.decks.find((t=>t._id===e))}findPlayerById(e){return this.players.find((t=>t._id===e))}findCardById(e){let t=null;if(this.decks.length>0){for(;null===t;)for(let a of this.decks)t=a.findCardById(e);return t}}}}(),s}()}));