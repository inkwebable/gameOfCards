var GameOfCards=function(e){var t={};function a(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,a),s.l=!0,s.exports}return a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)a.d(r,s,function(t){return e[t]}.bind(null,s));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=4)}([function(e,t,a){var r=a(1),s=a(2);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);var n={insert:"head",singleton:!1};r(s,n);e.exports=s.locals||{}},function(e,t,a){"use strict";var r,s=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},n=function(){var e={};return function(t){if(void 0===e[t]){var a=document.querySelector(t);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(e){a=null}e[t]=a}return e[t]}}(),i=[];function o(e){for(var t=-1,a=0;a<i.length;a++)if(i[a].identifier===e){t=a;break}return t}function d(e,t){for(var a={},r=[],s=0;s<e.length;s++){var n=e[s],d=t.base?n[0]+t.base:n[0],l=a[d]||0,c="".concat(d," ").concat(l);a[d]=l+1;var h=o(c),f={css:n[1],media:n[2],sourceMap:n[3]};-1!==h?(i[h].references++,i[h].updater(f)):i.push({identifier:c,updater:v(f,t),references:1}),r.push(c)}return r}function l(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var s=a.nc;s&&(r.nonce=s)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var i=n(e.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}return t}var c,h=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function f(e,t,a,r){var s=a?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=h(t,s);else{var n=document.createTextNode(s),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(n,i[t]):e.appendChild(n)}}function m(e,t,a){var r=a.css,s=a.media,n=a.sourceMap;if(s?e.setAttribute("media",s):e.removeAttribute("media"),n&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var u=null,p=0;function v(e,t){var a,r,s;if(t.singleton){var n=p++;a=u||(u=l(t)),r=f.bind(null,a,n,!1),s=f.bind(null,a,n,!0)}else a=l(t),r=m.bind(null,a,t),s=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(a)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else s()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=s());var a=d(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<a.length;r++){var s=o(a[r]);i[s].references--}for(var n=d(e,t),l=0;l<a.length;l++){var c=o(a[l]);0===i[c].references&&(i[c].updater(),i.splice(c,1))}a=n}}}},function(e,t,a){(t=a(3)(!1)).push([e.i,"",""]),e.exports=t},function(e,t,a){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a=function(e,t){var a=e[1]||"",r=e[3];if(!r)return a;if(t&&"function"==typeof btoa){var s=(i=r,o=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),d="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),"/*# ".concat(d," */")),n=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[a].concat(n).concat([s]).join("\n")}var i,o,d;return[a].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(a,"}"):a})).join("")},t.i=function(e,a,r){"string"==typeof e&&(e=[[null,e,""]]);var s={};if(r)for(var n=0;n<this.length;n++){var i=this[n][0];null!=i&&(s[i]=!0)}for(var o=0;o<e.length;o++){var d=[].concat(e[o]);r&&s[d[0]]||(a&&(d[2]?d[2]="".concat(a," and ").concat(d[2]):d[2]=a),t.push(d))}},t}},function(e,t,a){"use strict";a.r(t),a.d(t,"Game",(function(){return p})),a.d(t,"Deck",(function(){return o})),a.d(t,"Actions",(function(){return r}));var r={};a.r(r),a.d(r,"wait",(function(){return v})),a.d(r,"cardShuffle",(function(){return C})),a.d(r,"swapDomElements",(function(){return g})),a.d(r,"deal",(function(){return y})),a.d(r,"moveCardToH",(function(){return b})),a.d(r,"animateCardFromOneAreaToAnother",(function(){return k})),a.d(r,"dealCards",(function(){return O})),a.d(r,"detectArea",(function(){return w})),a.d(r,"addDomEvent",(function(){return D})),a.d(r,"removeDomEvent",(function(){return x}));var s=a(0),n=a.n(s);var i=class{constructor(e){let t=Object.assign({},{name:"",suit:"",image:"",imageDefault:"default-front",cardColor:"",visible:!1,allowFlip:!0,clickable:!0,movable:!0,moving:!1,droppable:!1,inArea:null,transitioning:!1,faceUp:!1,faceDown:!0,currentEvent:null,events:{click:()=>{},transitionend:()=>{}},onClick:e=>{},onCardFaceUp:()=>{},onCardFaceDown:()=>{}},e);Object.defineProperties(this,{_id:{value:t.id||void 0,writable:!1}}),this.name=t.name||"",this.suit=t.suit||"",this.image=t.image||"",this.imageDefault=t.imageDefault,this.cardColor=t.cardColor||"",this.visible=t.visible||!1,this.allowFlip=t.allowFlip||!0,this.clickable=t.clickable||!0,this.movable=t.movable||!0,this.moving=t.moving||!1,this.droppable=t.droppable||!1,this.inArea=t.inArea||null,this.transitioning=t.transitioning||!1,this.faceUp=t.faceUp||!1,this.faceDown=t.faceDown||!0,this.currentEvent=t.currentEvent||null,this.events=t.events||{},this.onClick=t.onClick||(e=>{}),this.onCardFaceUp=t.onCardFaceUp||(e=>{}),this.onCardFaceDown=t.onCardFaceDown||(e=>{})}setDom(e){Object.defineProperty(this,"dom",{value:e,writable:!1})}addDOMClassContainer(e){this.dom.className+=" "+e}setDOMClassCard(e){this.dom.children[0].className=e}addDOMClassCard(e){this.dom.children[0].className+=" "+e}setClickEvent(e,t=!0){this.onClick=e.bind(this),t&&this.activateClickEventListener()}setTransitionEvent({onCardFaceUp:e,onCardFaceDown:t},a=!0){e&&(this.onCardFaceUp=e),t&&(this.onCardFaceDown=t),a&&this.activateTransitionedEventListener()}activateClickEventListener(){this.clearClickListener(),this.events.click=this.onClick,this.dom.addEventListener("click",this.events.click)}activateTransitionedEventListener(){this.clearTransitionedListener(),this.events.transitionend=this._afterTransition.bind(this),this.dom.addEventListener("transitionend",this.events.transitionend)}activateAllEventListeners(){console.log("core/Card activateAllEvents",this),this.removeAllEventListeners(),this.activateClickEventListener(),this.activateTransitionedEventListener()}removeAllEventListeners(){this.clearClickListener(),this.clearTransitionedListener()}removeAllEvents(){console.log("core/Card removeAllEvents",this);const e=[];for(let t in this.events)this.clearEvent(t)?(e.push(t+" removed"),this.events[t]=()=>{}):console.error(`${t}event not removed from card ${this._id}`);return e}clearEvent(e){return!!{}.hasOwnProperty.call(this.events,e)&&(this.dom.removeEventListener(e,this.events[e]),!0)}clearClickListener(e=this.events.click){this.dom.removeEventListener("click",e)}clearTransitionedListener(e=this.events.transitionend){this.dom.removeEventListener("transitionend",e)}flipCardFaceUp(){return this.currentEvent="flipCardFaceUp",!this.visible&&(this.dom.querySelector(".front img").src=this.image,this.addDOMClassCard(" flipped"),this.transitioning=!0,!0)}flipCardFaceDown(){return this.currentEvent="flipCardFaceDown",!!this.visible&&(this.setDOMClassCard("card"),this.transitioning=!0,!0)}_afterTransition(e){this.transitioning=!1,"flipCardFaceUp"===this.currentEvent&&(this.visible=!0,this.onCardFaceUp(e)),"flipCardFaceDown"===this.currentEvent&&(this.visible=!1,this.onCardFaceDown(e),this.clearFrontFaceImg())}clearFrontFaceImg(e=this.imageDefault){this.dom.querySelector(".front img").src=e}isTransitioning(){return!0===this.transitioning}};var o=class{constructor(e,t="standard playing cards",a="js-deck",r){const s=Object.assign({},{numberOfEachCard:1,cardSuits:{hearts:"red",clubs:"black",diamonds:"red",spades:"black"},cardColours:["black","red"],cardValues:{A:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,J:11,Q:12,K:13},imagePath:"images/cards/",cardSectionClass:"card-container",backOfCardSrc:"card-back.png",frontOfCardSrc:"default-front.png",customCardContainerClass:"",allowFlip:!0},r);Object.defineProperties(this,{_id:{value:e,writable:!1}}),Object.defineProperties(this,{name:{value:t,writable:!1}}),Object.defineProperties(this,{elementId:{value:a,writable:!1}}),this._ids=s._ids||[],this._DOMCards=s._DOMCards||[],this._DOMDeck=s._DOMDeck||[],this.numberOfEachCard=s.numberOfEachCard||1,this.cardSuits=s.cardSuits,this.cardColours=s.cardColours,this.cardValues=s.cardValues,this.imagePath=s.imagePath,this.cardSectionClass=s.cardSectionClass,this.backOfCardSrc=s.backOfCardSrc,this.frontOfCardSrc=s.frontOfCardSrc,this.cards=s.cards||[],this.customCardContainerClass=s.customCardContainerClass,this.allowFlip=s.allowFlip,this.areas=s.areas,this.createDeckObj()}newNumber(e){let t="_"+Math.floor(1e7*Math.random());return-1===e.indexOf(t)?(e.push(t),t):this.newNumber(e)}createDeckObj(){for(const e in this.cardSuits)for(const t in this.cardValues){let a=0;for(;a<this.numberOfEachCard;){let r=this.newNumber(this._ids),s=new i({name:t,suit:e,image:`${this.imagePath}${t}${e}.png`,imageDefault:this.imagePath+this.frontOfCardSrc,cardColor:this.cardSuits.suit,id:r.toString()});this.cards.push(s),a++}}}createDeckObjOld(){console.log("core/Deck createDeckObj");for(let e=0;e<this.cardSuits.length;e++){let t,a=2,r=this.cardSuits[e];for(let e=0;e<13;e++){let s=this.newNumber(this._ids);e<=8&&(t=a),9===e&&(t="j"),10===e&&(t="q"),11===e&&(t="k"),12===e&&(t="a",a=1);let n,o=t+=r;n="clubs"===r||"spades"===r?"black":"red";let d=new i({name:a,suit:r,image:this.imagePath+o+".png",imageDefault:this.imagePath+this.frontOfCardSrc,cardColor:n,id:s.toString()});this.cards.push(d),a++}}}makeDomDeck(e=this._DOMCards){for(let t=0;t<this.cards.length;t++)e.push(`<section key="${t}" class="${this.cardSectionClass} ${this.customCardContainerClass}" style="transform: translate(0px,0px);">\n                <div class="card" id="${this.cards[t]._id}">\n                <figure class="back"><img src="${this.imagePath}${this.backOfCardSrc}" alt="back of card"></figure>\n                <figure class="front"><img src="${this.imagePath}${this.frontOfCardSrc}" alt="front of card"></figure>\n                <p class="cheat">${this.cards[t].name} ${this.cards[t].suit}</p>\n                </div>\n                </section>`)}addDeckToDOM(e=this.elementId,t=this._DOMCards){document.getElementById(e).innerHTML=t.join("")}assignCardDomToCardObj(e=this.cards){let t,a=[];for(let r of e)t=document.getElementById(r._id),a.push(t),r.setDom(t.parentNode);return a}shuffleCardsObj(e=this.cards){let t,a,r=e.length;for(;0!==r;)a=Math.floor(Math.random()*r),r-=1,t=e[r],e[r]=e[a],e[a]=t;return e}findCard(e){return this.cards.find(t=>t._id===e)}findCardById(e){return this.cards.find(t=>t._id===e)}resetFlippedCards(e){console.log("reset");for(let e in this.flipped)this.flipped[e].flipCardFaceDown();e()}setUpCardEvents(){for(let e of this.cards)e.setUpEvents()}allFlippedCardsTransitioned(){for(let e in this.flipped)if(this.flipped[e].transitioning)return!1;return!0}propHasThisManyCards(e,t){try{if(this.hasOwnProperty(e))return Object.keys(this[e]).length===t;throw"propertyNoFoundException"}catch(e){this.handleMyErrors(e)}}removeCardFromPropByID(e,t){return delete this[e][t]}handleMyErrors(e){console.error("error",e)}};var d=class extends o{constructor({id:e,name:t,elementId:a,options:r}){super(e,t,a,r)}};var l=class{constructor(){this.deckClass=d}createDeck(e,t){switch(e){case"default":this.deckClass=d}return new this.deckClass(t)}};var c=class{constructor(e,t,a){const r=Object.assign({},{name:"area",id:"js-area",owner:"board",placeHolders:{},stackCardsOnTop:!1,stackVertical:!1,maxCardsInVertical:12,maxColumnsForVertical:7,stackHorizontal:!1,maxCardsInHorizontal:0,maxRowsForHorizontal:0,flexArea:!0,autoStack:!1},a);Object.defineProperties(this,{id:{value:e,writable:!1}}),this.name=t,this.owner=r.owner||"board",this.placeHolders=r.placeHolders||{},this.position={top:0,right:0,bottom:0,left:0},this.siteElementOffsets={top:72,right:0,bottom:0,left:0},this.cards=[],this.rules={cardsFaceDown:!0,cardsFaceUp:!1,canReceiveCards:!0,canRemoveCards:!0,canMoveCards:!1,canTurnCards:!0,playerCanSeeCards:!0,othersCanSeeCards:!0,maxCardsAllowed:void 0},this.handleCardReceived=e=>{},this.handleCardRemoved=e=>{console.log("dom removed from area",e)},this.events={},this.stackVertical=r.stackVertical,this.maxCardsInVertical=r.maxCardsInVertical||12,this.maxColumnsForVertical=r.maxColumnsForVertical||7,this.stackHorizontal=r.stackHorizontal,this.maxCardsInHorizontal=r.maxCardsInHorizontal||0,this.maxRowsForHorizontal=r.maxRowsForHorizontal||0,this.flexArea=r.flexArea,this.autoStack=r.autoStack,this.dom=void 0,this.getAreaPosition()}getAreaPosition(){let e=document.getElementById(this.id);this.dom=e;let t=e.getBoundingClientRect();this.position.top=t.top-this.siteElementOffsets.top,this.position.right=t.right-this.siteElementOffsets.right,this.position.bottom=t.bottom-this.siteElementOffsets.bottom,this.position.left=t.left-this.siteElementOffsets.left,console.log("getAreaPosition",this.id,this.position,e)}setObserver(){const e=this.dom;return new MutationObserver((e,t)=>{for(let t of e)"childList"===t.type?(t.addedNodes.length>0&&t.addedNodes.forEach(async e=>{await this.onCardReceived(e)}),t.removedNodes.length>0&&t.removedNodes.forEach(async e=>{await this.onCardRemoved(e)})):"attributes"===t.type&&console.log("The "+t.attributeName+" attribute was modified.")}).observe(e,{attributes:!1,childList:!0,subtree:!0}),this}async onCardReceived(e){return console.log("Area.onCardReceived",e),await this.handleCardReceived(e),Promise.resolve({someVal:"onCardReceived done"})}async onCardRemoved(e){return console.log("Area.onCardRemoved",e),await this.handleCardRemoved(e),Promise.resolve({someVal:"onCardRemoved done"})}assignEvent(e){}calculateSiteElementOffsets(){}};var h=class{constructor(e,t){let a=Object.assign({},{allowFlip:!0,cardsCanBeAdded:!0,cardsCanBeClicked:!0,cardsCanBeRemoved:!0,cardsCanBeSelected:!0},t);Object.defineProperties(this,{_id:{value:e,writable:!1}}),this.area=a.area||{},this.rules=a.rules||{allowFlip:!0,cardLimit:-1},this.cardsCanBeClicked=a.cardsCanBeClicked,this.cardsCanBeSelected=a.cardsCanBeSelected,this.handleCardAdded=(e,t)=>console.log("Hand.handleCardAdded",e,t),this.handleCardRemoved=(e,t)=>console.log("Hand.handleCardRemoved",e),this.events={onCardReceived:()=>{},onCardAdded:()=>{},onCardRemoved:()=>{},onCardRequested:()=>{}},this.cards=[]}createArea(e,t,a){return this.area=new c(e,t,a),this.area.hand=this,Object.defineProperty(this.area,"hand",{value:this,writable:!1}),this.area}addCardsToHand(e){let t=e.filter(e=>e instanceof i);this.cards=t,this.onCardsReceived()}async addCardToHand(e){this.cards.push(e),await this.onCardAdded(e)}async removeCardFromHand(e){this.cards=this.cards.filter(t=>t._id!==e._id),await this.onCardRemoved(e)}async onCardAdded(e){return console.log("Hand.onCardReceived",e),await this.handleCardAdded(e,this),Promise.resolve({someVal:"Hand.onCardReceived done"})}async onCardRemoved(e){return console.log("Hand.onCardRemoved",e),await this.handleCardRemoved(e,this),Promise.resolve({someVal:"Hand.onCardRemoved done"})}onCardsReceived(){console.log("onCardsReceived")}async onCardReceived(e,t){return console.log("Hand.onCardReceived"),Promise.resolve({someVal:"onCardReceived"})}setUpCardEvents(){console.log("hand setUpCardEvents",this);for(let e of this.cards)e.activateAllEventListeners()}setCardClickFn(e,t=!0){if(console.log("Hand set cardClick",this.cards.length),this.cards.length>0)for(let a of this.cards)a.setClickEvent(e,t)}setAfterCardFaceUpFn(e,t=!0){if(this.cards.length>0)for(let a of this.cards)a.setTransitionEvent({onCardFaceUp:e},t)}setAfterCardFaceDownFn(e,t=!0){if(this.cards.length>0)for(let a of this.cards)a.setTransitionEvent({onCardFaceDown:e},t)}removeCardEvents(){for(let e of this.cards){console.log("removeCardEvents",e);const t=e.removeAllEvents();console.log("removed",t)}}allCardsTransitioned(){for(let e of this.cards)if(e.transitioning)return!1;return!0}getLastCard(){if(this.cards.length>0)return this.cards[this.cards.length-1]}findCardById(e){return this.cards.find(t=>t._id===e)}};var f=class{constructor(e,t="player",a){let r=Object.assign({},{ready:!1,turn:!1},a);Object.defineProperties(this,{_id:{value:e,writable:!1}}),this.name=t,this.hand=r||[],this.ready=r||!1,this.turn=r||!1}createHand(e,t){return this.hand=new h(e,t),this.hand}readyToPlay(){return this.ready=confirm("Ready to Start?"),this.ready}};var m=class extends f{constructor({id:e,name:t,options:a}){super(e,t,a)}};var u=class{constructor(){this.playerClass=m}createPlayer(e,t){return this.playerClass=m,new this.playerClass(t)}};var p=class{constructor(e){let t=Object.assign({},{name:"GameOfCards",data:{}},e);this.name=t.name,this.data=t.data||{},this.decks=[],this.deck={},this.players=[],this.events={},this.deckFactory=new l,this.playerFactory=new u}createStandardDeck(e,t,a,r,s=!0){const n=this.deckFactory.createDeck("default",{id:e,name:t,elementId:a,options:r});return s&&this.addDeckToDecks(n),n}addDeckToDecks(e){this.decks.push(e)}createPlayer(e,t,a,r=!0){const s=this.playerFactory.createPlayer("default",{id:e,name:t,options:a});return r&&this.addPlayerToPlayers(s),s}addPlayerToPlayers(e){this.players.push(e)}setAfterCardFaceUp(e){for(let t of this.deck.cards)t.afterCardFaceUp=e}setAfterCardFaceDown(e){for(let t of this.deck.cards)t.afterCardFaceDown=e}setCardClick(e,t){console.log("Game set cardClick");for(let a of e)a.onClick=t}removeCardClick(e,t){for(let t of e)t.clearClick()}removeEvents(e){console.log("game - removeEvents ",e);for(let t in e)e[t].removeAllEvents()}findPlayerByName(e){if(this.players.length>0)return this.players.find(t=>t.name===e)}addDeckToDom(e){return(e?this.findDeckById(e):this.decks[0]).addDeckToDOM(),this}addDeckToDomOld(e,t=this.deck._DOMCards){document.getElementById(e).innerHTML=t.join("")}assignCardDomToCardObj(e){return(e?this.findDeckById(e):this.decks[0]).assignCardDomToCardObj()}shuffleDeckCards(e){return(e?this.findDeckById(e):this.decks[0]).shuffleCardsObj(),this}makeDomMarkUp(e){return(e?this.findDeckById(e):this.decks[0]).makeDomDeck(),this}findDeckById(e){return this.decks.find(t=>t._id===e)}findPlayerById(e){return this.players.find(t=>t._id===e)}findCardById(e){let t=null;if(this.decks.length>0){for(;null===t;)for(let a of this.decks)t=a.findCardById(e);return t}}};const v=e=>new Promise(t=>setTimeout(t,e)),C=async(e=[],t=(()=>{}),a={})=>{let{index:r,delay:s}=Object.assign({},{index:0,delay:500},a);for(await v(s);r<=e.length-2;){let t=e[r],a=e[r+1],s=t.dom,n=a.dom;if(s.className="card-container shuffle-left",n&&(n.className="card-container shuffle-right"),await v(100),s.className="card-container shuffle-right",n){n.className="card-container shuffle-left",g(s,n);let i=t;e[r]=a,e[r+1]=i}r+=2}return t(),Promise.resolve({someVal:r})},g=(e,t)=>{var a=t.parentNode,r=t.nextSibling;r===e?a.insertBefore(e,t):(e.parentNode.insertBefore(t,e),r?a.insertBefore(e,r):a.appendChild(e))},y=async(e,t,{numberOfCards:a=12,cardWidthOffset:r=0,cardHeightOffset:s=0,stackVertical:n=!1,stackHorizontal:i=!0,alwaysDealToTop:o=!1,tilt:d=!1,speed:l=300})=>{let c=null,h=0,f=120,m=135;e.hand.cards.length>0&&(f=e.hand.cards[0].dom.clientWidth+5,m=e.hand.cards[0].dom.clientHeight-50,console.log("card dimes in hand",f,m),console.log("start myLoop",h),c=setInterval(()=>{let u=t.hand.cards.length;console.log("in loop",h,t.hand.cards.length),!1!==i&&h>0&&(r+=f),!1!==n&&h>0&&(s+=m),!0===i&&(r=u*f),!0===n&&(s=u*m);let p=e.hand.cards[e.hand.cards.length-1];o&&(p.dom.style.zIndex=u+";"),p&&(b({index:h,card:p,cardWidth:f,cardHeight:m,fromObj:e,toObj:t,animSpeed:l,stackHorizontal:i,cardWidthOffset:r,cardHeightOffset:s,stackVertical:n,manual:!1,tilt:d}),console.log("test")),h++,h>=a&&(h=0,clearInterval(c))},l+50))},b=async({index:e,card:t,fromObj:a,toObj:r,animSpeed:s,stackHorizontal:n,stackVertical:i,cardWidthOffset:o,cardHeightOffset:d,manual:l,tiltCard:c,cancelMove:h})=>{console.log("sbs",o,"stack",d);r.hand.area,a.hand.area;let f=t.dom.clientWidth;t.dom.clientHeight;l||(!1===n&&!1===i?(t.dom.style.transform="translate(0px,"+(r.hand.area.position.top-a.hand.area.position.top)+"px )",t.dom.style.transition="transform "+s+"ms"):i?(t.dom.style.position="absolute",t.dom.style.transform=`translate(${r.hand.area.position.left-a.hand.area.position.left}px,${r.hand.area.position.top-a.hand.area.position.top+d}px)`,t.dom.style.transition="transform "+s+"ms",t.dom.style.width=f+"px"):(t.dom.style.position="absolute",t.dom.style.transform=`translate(${r.hand.area.position.left-a.hand.area.position.left+o}px,${r.hand.area.position.top-a.hand.area.position.top}px)`,t.dom.style.transition="transform "+s+"ms",t.dom.style.width=f+"px"),t.dom.style.zIndex=e);let m=document.getElementById(r.hand.area.id),u=setTimeout(()=>{t.dom.className="card-container",m.appendChild(t.dom),0!=n&&o>0?(t.dom.style.transform="translate("+o+"px,0px )",t.dom.style.transition="transform 0ms"):0!=i&&d>0?(t.dom.style.transform=`translate(0px,${d}px )`,t.dom.style.transition="transform 0ms"):(t.dom.style.transform="translate(0px,0px )",t.dom.style.transition="transform 0ms"),a.hand.cards.pop(),r.hand.cards.push(t),console.log("add card toObj",r.hand.cards)},s);!0===h&&clearTimeout(u)},k=async({fromHand:e,toHand:t,card:a,speed:r=300,moveCardObjects:s=!0})=>{let n=a.dom.clientWidth,i=a.dom.clientHeight,o=t.cards.length*(n+5),d=t.cards.length*(i-i/2),l=t.area.stackHorizontal,c=t.area.stackVertical,h=t.area.flexArea,f=t.area.autoStack,m=t.area.maxCardsInHorizontal,u=0;return h&&l&&f&&(m=Math.floor(parseInt(t.area.dom.offsetWidth,10)/parseInt(n,10))),c?(a.dom.style.position="absolute",a.dom.style.transform=`translate(${t.area.position.left-e.area.position.left}px,${t.area.position.top-e.area.position.top+d}px)`,a.dom.style.transition="transform "+r+"ms",a.dom.style.width=n+"px"):l?(m>0&&(u=parseInt(t.cards.length/m,10),o=(n+5)*(t.cards.length%m)),t.area.dom.style.display=h?"flex":"relative",t.area.dom.style.flexWrap=h?"wrap":"nowrap",a.dom.style.position=h?"relative":"absolute",a.dom.style.transform=`translate(${t.area.position.left-e.area.position.left+o}px,${t.area.position.top-e.area.position.top+u*i}px)`,a.dom.style.transition="transform "+r+"ms",a.dom.style.width=n+"px"):(a.dom.style.transform="translate(0px,"+(t.area.position.top-e.area.position.top)+"px )",a.dom.style.transition="transform "+r+"ms"),await v(r),a.dom.className="card-container",t.area.dom.appendChild(a.dom),l?(a.dom.style.transform=h?"translate(0,0)":`translate(${o}px,${u*(i+5)}px )`,a.dom.style.transition="transform 0ms"):c&&d>0?(a.dom.style.transform=`translate(0px,${d}px )`,a.dom.style.transition="transform 0ms"):(a.dom.style.transform="translate(0px,0px )",a.dom.style.transition="transform 0ms"),s&&(e.cards.removeCardFromHand(a),t.cards.addCardsToHand(a)),Promise.resolve({someVal:"done"})},O=async(e,t,a={})=>{let{totalCardsToDeal:r,perPlayer:s,speed:n,sequential:i,delay:o}=Object.assign({},{totalCardsToDeal:0,perPlayer:0,speed:300,sequential:!1,delay:1e3},a),d=e.hand.cards.length;if(!d>0)return Promise.reject({error:"no cards"});await v(o);let l=t.length,c=0,h=0,f=Array(l).fill(0);for(0!==s?r=s>0?s*l:r:s=r/l;c<r&&0!==d;){let a=e.hand.getLastCard();await k({fromHand:e.hand,toHand:t[h].hand,card:a,speed:n,moveCardObjects:!1}),console.log("adding and poping card in deal"),await e.hand.removeCardFromHand(a),await t[h].hand.addCardToHand(a),f[h]+=1,i?t[h]&&(h=h>=l-1?0:h+1):f[h]===s&&(h=h>=l-1?0:h+1),c++}return Promise.resolve({someVal:"done"})},w=(e,t,a,r,s,n)=>{for(var i=[a,r,s,n],o=null,d=0;d<i.length;d++){if(e<=i[d].right&&e>=i[d].left&&t>=i[d].top&&t<=i[d].bottom){o=i[d].name;break}o=null}return o},D=(e,t,a)=>{e.events[t]=a,e.events[t]=e[t].bind(e),e.dom.addEventListener(t,e.events[t])},x=(e,t)=>{e.dom.removeEventListener(t,e.events[t])};console.log("styles",n.a)}]);